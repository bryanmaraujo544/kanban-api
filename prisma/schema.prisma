// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int    @id @default(autoincrement())
  name      String @db.VarChar(256)
  photo_url String @db.VarChar(1024)
  email     String @unique @db.VarChar(256)
  password  String @db.VarChar(512)

  collaborators Collaborator[]
  Board         Board[]
  @@map("users")
}

model Board {
  id       Int  @id @default(autoincrement())
  user     User @relation(fields: [admin_id], references: [id])
  admin_id Int

  Column       Column[]
  Collaborator Collaborator[]
  Task         Task[]

  @@map("boards")
}

model Collaborator {
  id       Int   @id @default(autoincrement())
  board    Board @relation(fields: [board_id], references: [id])
  board_id Int
  user     User  @relation(fields: [user_id], references: [id])
  user_id  Int

  @@map("collaborators")
}

model Column {
  id       Int    @id @default(autoincrement())
  title    String
  board    Board  @relation(fields: [board_id], references: [id])
  board_id Int
  tasks    Task[]

  @@map("columns")
}

model Task {
  id    Int    @id @default(autoincrement())
  title String @db.VarChar(256)
  tag   String @db.VarChar(32)

  column    Column? @relation(fields: [column_id], references: [id])
  column_id Int?

  board    Board @relation(fields: [board_id], references: [id])
  board_id Int
  @@map("tasks")
}
